<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Provider Portal - CGM-EHR Integration</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f9ff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: #2a5c8b;
            color: white;
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: white;
            display: flex;
            align-items: center;
            text-decoration: none;
        }

        .logo i {
            margin-right: 10px;
            color: #3498db;
        }

        .user-menu {
            display: flex;
            align-items: center;
        }

        .user-info {
            margin-right: 20px;
            color: white;
        }

        .logout-btn {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            text-decoration: none;
            transition: background-color 0.3s;
        }

        .logout-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        /* Dashboard Layout */
        .dashboard {
            display: flex;
            padding: 20px 0;
        }

        .sidebar {
            width: 250px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-right: 20px;
            height: calc(100vh - 110px);
            position: sticky;
            top: 90px;
            overflow-y: auto;
        }

        .sidebar h3 {
            font-size: 18px;
            margin-bottom: 20px;
            color: #2a5c8b;
        }

        .patient-list {
            list-style: none;
        }

        .patient-list li {
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }

        .patient-list li:hover {
            background-color: #f0f7ff;
        }

        .patient-list li.active {
            background-color: #e0f7fa;
            font-weight: bold;
        }

        .patient-icon {
            background-color: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 14px;
        }

        .patient-search {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 15px;
            width: 100%;
        }

        .content-area {
            flex: 1;
        }

        .patient-info {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 20px;
        }

        .patient-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .patient-avatar {
            width: 60px;
            height: 60px;
            background-color: #e0f7fa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 24px;
            color: #3498db;
        }

        .patient-details h2 {
            font-size: 22px;
            margin-bottom: 5px;
            color: #2a5c8b;
        }

        .patient-meta {
            display: flex;
            color: #666;
            font-size: 14px;
        }

        .patient-meta span {
            margin-right: 20px;
            display: flex;
            align-items: center;
        }

        .patient-meta i {
            margin-right: 5px;
            color: #3498db;
        }

        .data-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .data-card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 20px;
            text-align: center;
        }

        .data-card h3 {
            font-size: 16px;
            color: #666;
            margin-bottom: 10px;
        }

        .data-value {
            font-size: 24px;
            font-weight: bold;
            color: #2a5c8b;
        }

        .data-label {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

        .data-trend {
            margin-top: 10px;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .up-trend {
            color: #27ae60;
        }

        .down-trend {
            color: #e74c3c;
        }

        .trend-icon {
            margin-right: 5px;
        }

        .chart-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 20px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 18px;
            color: #2a5c8b;
        }

        .chart-actions select {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: white;
        }

        .chart-content {
            height: 300px;
        }

        .no-patient-selected {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 30px;
            text-align: center;
            margin-top: 50px;
        }

        .no-patient-selected i {
            font-size: 50px;
            color: #3498db;
            margin-bottom: 20px;
        }

        .no-patient-selected h2 {
            font-size: 24px;
            color: #2a5c8b;
            margin-bottom: 10px;
        }

        .patient-data {
            display: none;
        }

        .message-center {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 20px;
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .message-title {
            font-size: 18px;
            color: #2a5c8b;
        }

        .compose-btn {
            background-color: #27ae60;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            font-size: 14px;
            cursor: pointer;
        }

        .compose-btn i {
            margin-right: 5px;
        }

        .message-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .message-item:hover {
            background-color: #f9f9f9;
        }

        .message-sender {
            width: 40px;
            height: 40px;
            background-color: #e0f7fa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: #3498db;
        }

        .message-content {
            flex: 1;
        }

        .message-subject {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .message-preview {
            color: #666;
            font-size: 14px;
        }

        .message-meta {
            text-align: right;
            min-width: 100px;
        }

        .message-date {
            font-size: 12px;
            color: #999;
        }

        .unread {
            background-color: #f0f7ff;
        }

        .unread .message-subject {
            color: #2a5c8b;
        }

        .message-badge {
            background-color: #3498db;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
            display: inline-block;
            margin-top: 5px;
        }

        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }

        .modal {
            background-color: white;
            border-radius: 10px;
            width: 500px;
            max-width: 90%;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 18px;
            color: #2a5c8b;
        }

        .modal-close {
            cursor: pointer;
            font-size: 20px;
            color: #999;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #eee;
            text-align: right;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .form-group textarea {
            height: 120px;
        }

        .btn {
            display: inline-block;
            background-color: #27ae60;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s;
            cursor: pointer;
            border: none;
            font-size: 14px;
        }

        .btn:hover {
            background-color: #219653;
        }

        .btn-secondary {
            background-color: #95a5a6;
        }

        .btn-secondary:hover {
            background-color: #7f8c8d;
        }

        /* Responsive styles */
        @media (max-width: 992px) {
            .dashboard {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                margin-right: 0;
                margin-bottom: 20px;
                position: static;
            }
            
            .data-cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 576px) {
            .data-cards {
                grid-template-columns: 1fr;
            }
            
            .patient-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .patient-avatar {
                margin-bottom: 15px;
            }
            
            .patient-meta {
                flex-direction: column;
            }
            
            .patient-meta span {
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="#" class="logo">
                <i class="fas fa-heartbeat"></i>
                CGM-EHR Provider Portal
            </a>
            <div class="user-menu">
                <div class="user-info">
                    <i class="fas fa-user-md"></i> Dr. Johnson
                </div>
                <a href="login.html" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
    </header>

    <!-- Dashboard -->
    <div class="container dashboard">
        <!-- Sidebar -->
        <div class="sidebar">
            <input type="text" class="patient-search" placeholder="Search patients...">
            <h3>Patient List</h3>
            <ul class="patient-list" id="patient-list">
                <!-- Patient list will be populated dynamically -->
            </ul>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Initial state when no patient is selected -->
            <div class="no-patient-selected" id="no-patient-selected">
                <i class="fas fa-user-circle"></i>
                <h2>No Patient Selected</h2>
                <p>Please select a patient from the list to view their data.</p>
            </div>

            <!-- Patient data (hidden initially) -->
            <div class="patient-data" id="patient-data">
                <!-- Patient Information -->
                <div class="patient-info">
                    <div class="patient-header">
                        <div class="patient-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="patient-details">
                            <h2 id="patient-name">Patient Name</h2>
                            <div class="patient-meta">
                                <span><i class="fas fa-birthday-cake"></i> <span id="patient-age">42</span> years</span>
                                <span><i class="fas fa-weight"></i> <span id="patient-weight">75</span> kg</span>
                                <span><i class="fas fa-ruler-vertical"></i> <span id="patient-height">175</span> cm</span>
                                <span><i class="fas fa-clipboard-list"></i> <span id="patient-diagnosis">Type 2 Diabetes</span></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Cards -->
                <div class="data-cards">
                    <div class="data-card">
                        <h3>Average Glucose</h3>
                        <div class="data-value" id="glucose-value">142</div>
                        <div class="data-label">mg/dL</div>
                        <div class="data-trend up-trend">
                            <span class="trend-icon"><i class="fas fa-arrow-up"></i></span>
                            <span id="glucose-trend">5%</span> from last week
                        </div>
                    </div>
                    <div class="data-card">
                        <h3>Time in Range</h3>
                        <div class="data-value" id="time-in-range">68</div>
                        <div class="data-label">% of time</div>
                        <div class="data-trend down-trend">
                            <span class="trend-icon"><i class="fas fa-arrow-down"></i></span>
                            <span id="range-trend">3%</span> from last week
                        </div>
                    </div>
                    <div class="data-card">
                        <h3>HbA1c (estimated)</h3>
                        <div class="data-value" id="a1c-value">6.8</div>
                        <div class="data-label">%</div>
                        <div class="data-trend up-trend">
                            <span class="trend-icon"><i class="fas fa-arrow-up"></i></span>
                            <span id="a1c-trend">0.2</span> points from last check
                        </div>
                    </div>
                </div>
                
                <!-- Alert Management Section -->
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="chart-title">Glucose Alerts</div>
                        <button class="compose-btn" id="add-alert-btn">
                            <i class="fas fa-plus"></i> Add New Alert
                        </button>
                    </div>
                    <div id="alerts-container" style="padding: 0 10px;">
                        <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">
                            <thead>
                                <tr style="border-bottom: 2px solid #eee; text-align: left;">
                                    <th style="padding: 10px;">Alert Type</th>
                                    <th style="padding: 10px;">Threshold</th>
                                    <th style="padding: 10px;">Status</th>
                                    <th style="padding: 10px;">Notification</th>
                                    <th style="padding: 10px;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="alerts-list">
                                <!-- Alerts will be populated dynamically -->
                            </tbody>
                        </table>
                        <div id="no-alerts-message" style="text-align: center; padding: 20px; color: #666;">
                            No alerts configured for this patient.
                        </div>
                    </div>
                </div>

                <!-- Glucose Chart -->
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="chart-title">Glucose Levels</div>
                        <div class="chart-actions">
                            <select id="glucose-timeframe">
                                <option value="day">Last 24 Hours</option>
                                <option value="week" selected>Last 7 Days</option>
                                <option value="month">Last 30 Days</option>
                            </select>
                        </div>
                    </div>
                    <div class="chart-content">
                        <canvas id="glucose-chart"></canvas>
                    </div>
                </div>

                <!-- Message Center -->
                <div class="message-center">
                    <div class="message-header">
                        <div class="message-title">
                            <i class="fas fa-envelope"></i> Recent Messages
                        </div>
                        <button class="compose-btn" id="compose-btn">
                            <i class="fas fa-pen"></i> Compose
                        </button>
                    </div>
                    
                    <div class="message-list" id="message-list">
                        <!-- Messages will be populated dynamically -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Compose Message Modal -->
    <div class="modal-overlay" id="compose-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Send Message to Patient</div>
                <div class="modal-close" id="modal-close">&times;</div>
            </div>
            <div class="modal-body">
                <form id="message-form">
                    <div class="form-group">
                        <label for="message-recipient">To:</label>
                        <select id="message-recipient" required>
                            <!-- Recipients will be populated dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="message-subject">Subject:</label>
                        <input type="text" id="message-subject" required>
                    </div>
                    <div class="form-group">
                        <label for="message-body">Message:</label>
                        <textarea id="message-body" required></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancel-btn">Cancel</button>
                <button class="btn" id="send-btn">Send Message</button>
            </div>
        </div>
    </div>
    
    <!-- Add Alert Modal -->
    <div class="modal-overlay" id="alert-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Configure Glucose Alert</div>
                <div class="modal-close" id="alert-modal-close">&times;</div>
            </div>
            <div class="modal-body">
                <form id="alert-form">
                    <div class="form-group">
                        <label for="alert-type">Alert Type:</label>
                        <select id="alert-type" required>
                            <option value="high">High Glucose</option>
                            <option value="low">Low Glucose</option>
                            <option value="rate">Rapid Change</option>
                            <option value="missed">Missed Readings</option>
                        </select>
                    </div>
                    
                    <div id="threshold-container" class="form-group">
                        <label for="alert-threshold">Threshold Value:</label>
                        <div style="display: flex; align-items: center;">
                            <input type="number" id="alert-threshold" required style="flex: 1;">
                            <span id="threshold-unit" style="margin-left: 10px;">mg/dL</span>
                        </div>
                        <small id="threshold-help" style="display: block; margin-top: 5px; color: #666;">
                            Trigger alert when glucose exceeds this value
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label for="alert-severity">Severity:</label>
                        <select id="alert-severity" required>
                            <option value="info">Informational</option>
                            <option value="warning" selected>Warning</option>
                            <option value="critical">Critical</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Notification Methods:</label>
                        <div style="margin-top: 10px;">
                            <label style="display: flex; align-items: center; font-weight: normal; margin-bottom: 10px;">
                                <input type="checkbox" id="notify-ehr" checked style="width: auto; margin-right: 10px;"> EHR System Alert
                            </label>
                            <label style="display: flex; align-items: center; font-weight: normal; margin-bottom: 10px;">
                                <input type="checkbox" id="notify-patient" checked style="width: auto; margin-right: 10px;"> Patient Mobile App
                            </label>
                            <label style="display: flex; align-items: center; font-weight: normal;">
                                <input type="checkbox" id="notify-sms" style="width: auto; margin-right: 10px;"> SMS to Provider
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="alert-notes">Notes (optional):</label>
                        <textarea id="alert-notes"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="alert-cancel-btn">Cancel</button>
                <button class="btn" id="alert-save-btn">Save Alert</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Generate random patient data
            const patients = [];
            for (let i = 1; i <= 20; i++) {
                const patientId = i;
                const firstName = ['John', 'Jane', 'Michael', 'Emily', 'David', 'Sarah', 'Robert', 'Lisa', 
                                  'William', 'Maria', 'James', 'Jennifer', 'Thomas', 'Patricia', 'Richard', 
                                  'Linda', 'Charles', 'Elizabeth', 'Joseph', 'Barbara'][Math.floor(Math.random() * 20)];
                const lastName = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis', 
                                 'Rodriguez', 'Martinez', 'Hernandez', 'Lopez', 'Wilson', 'Anderson', 'Thomas', 
                                 'Taylor', 'Moore', 'Jackson', 'Martin', 'Lee'][Math.floor(Math.random() * 20)];
                
                const diabetesType = Math.random() > 0.4 ? 'Type 2 Diabetes' : 'Type 1 Diabetes';
                const age = Math.floor(Math.random() * 50) + 20; // 20-70 years
                const weight = Math.floor(Math.random() * 40) + 60; // 60-100 kg
                const height = Math.floor(Math.random() * 30) + 160; // 160-190 cm
                
                // Generate glucose data for the last 7 days (with 4 readings per day)
                const glucoseData = [];
                const now = new Date();
                for (let day = 6; day >= 0; day--) {
                    for (let reading = 0; reading < 4; reading++) {
                        const date = new Date(now);
                        date.setDate(date.getDate() - day);
                        date.setHours(
                            [8, 12, 18, 22][reading], // Times for readings
                            Math.floor(Math.random() * 60), // Random minutes
                            0, 0
                        );
                        
                        // Base glucose level depending on diabetes type
                        let baseGlucose = diabetesType === 'Type 1 Diabetes' ? 160 : 140;
                        // Add daily pattern (higher in morning and evening)
                        if (reading === 0) baseGlucose += 20;
                        if (reading === 3) baseGlucose += 10;
                        // Add random variance
                        const variance = Math.floor(Math.random() * 60) - 30;
                        const glucose = baseGlucose + variance;
                        
                        glucoseData.push({
                            date: date,
                            value: glucose
                        });
                    }
                }
                
                // Calculate average glucose
                const totalGlucose = glucoseData.reduce((sum, reading) => sum + reading.value, 0);
                const avgGlucose = Math.round(totalGlucose / glucoseData.length);
                
                // Calculate time in range (70-180 mg/dL)
                const inRangeCount = glucoseData.filter(reading => reading.value >= 70 && reading.value <= 180).length;
                const timeInRange = Math.round((inRangeCount / glucoseData.length) * 100);
                
                // Estimate A1c (approximately average glucose / 28.7 + 2.15)
                const a1c = ((avgGlucose / 28.7) + 2.15).toFixed(1);
                
                // Random trends
                const glucoseTrend = Math.floor(Math.random() * 10) - 5; // -5% to +5%
                const rangeTrend = Math.floor(Math.random() * 8) - 4; // -4% to +4%
                const a1cTrend = (Math.random() * 0.6 - 0.3).toFixed(1); // -0.3 to +0.3
                
                // Add patient to array
                patients.push({
                    id: patientId,
                    firstName: firstName,
                    lastName: lastName,
                    fullName: `${firstName} ${lastName}`,
                    age: age,
                    weight: weight,
                    height: height,
                    diagnosis: diabetesType,
                    glucoseData: glucoseData,
                    avgGlucose: avgGlucose,
                    timeInRange: timeInRange,
                    a1c: a1c,
                    glucoseTrend: glucoseTrend,
                    rangeTrend: rangeTrend,
                    a1cTrend: a1cTrend,
                    messages: []
                });
            }
            
            // Sort patients by last name
            patients.sort((a, b) => a.lastName.localeCompare(b.lastName));
            
            // Generate sample messages
            const messageTemplates = [
                "I've been feeling dizzy after taking my medication",
                "My glucose readings have been higher than usual",
                "I need to reschedule my next appointment",
                "Question about my new insulin regimen",
                "Blood sugar fluctuating more than usual"
            ];
            
            const replyTemplates = [
                "Please monitor closely and come in if symptoms worsen",
                "Let's adjust your medication. I'll send a new prescription",
                "I'll have my assistant contact you about rescheduling",
                "Continue as prescribed and let me know if you experience any side effects",
                "Try to maintain consistent meal timing and check glucose more frequently"
            ];
            
            // Add random messages for some patients
            patients.forEach(patient => {
                // 50% chance of having a message
                if (Math.random() > 0.5) {
                    const messageIndex = Math.floor(Math.random() * messageTemplates.length);
                    const message = {
                        id: Date.now(),
                        from: patient.id,
                        fromName: patient.fullName,
                        subject: messageTemplates[messageIndex],
                        preview: messageTemplates[messageIndex].substring(0, 60) + '...',
                        date: new Date(Date.now() - Math.floor(Math.random() * 7 * 24 * 60 * 60 * 1000)), // Random time in last week
                        unread: Math.random() > 0.5
                    };
                    
                    // 30% chance of having a reply
                    if (Math.random() > 0.7) {
                        const reply = {
                            id: Date.now() + 1,
                            from: 'doctor',
                            fromName: 'Dr. Johnson',
                            subject: 'Re: ' + messageTemplates[messageIndex],
                            preview: replyTemplates[messageIndex].substring(0, 60) + '...',
                            date: new Date(message.date.getTime() + Math.floor(Math.random() * 2 * 24 * 60 * 60 * 1000)), // 0-2 days after
                            unread: false
                        };
                        
                        patient.messages.push(message, reply);
                    } else {
                        patient.messages.push(message);
                    }
                }
            });
            
            // Populate patient list
            const patientList = document.getElementById('patient-list');
            patients.forEach(patient => {
                const li = document.createElement('li');
                li.dataset.patientId = patient.id;
                li.innerHTML = `
                    <div class="patient-icon">${patient.firstName.charAt(0)}${patient.lastName.charAt(0)}</div>
                    ${patient.fullName}
                `;
                
                li.addEventListener('click', () => {
                    document.querySelectorAll('.patient-list li').forEach(item => {
                        item.classList.remove('active');
                    });
                    li.classList.add('active');
                    displayPatientData(patient);
                });
                
                patientList.appendChild(li);
            });
            
            // Patient search functionality
            document.querySelector('.patient-search').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                document.querySelectorAll('.patient-list li').forEach(li => {
                    const patientName = li.textContent.trim().toLowerCase();
                    if (patientName.includes(searchTerm)) {
                        li.style.display = 'flex';
                    } else {
                        li.style.display = 'none';
                    }
                });
            });
            
            // Display patient data function
            function displayPatientData(patient) {
                document.getElementById('no-patient-selected').style.display = 'none';
                document.getElementById('patient-data').style.display = 'block';
                
                // Update patient info
                document.getElementById('patient-name').textContent = patient.fullName;
                document.getElementById('patient-age').textContent = patient.age;
                document.getElementById('patient-weight').textContent = patient.weight;
                document.getElementById('patient-height').textContent = patient.height;
                document.getElementById('patient-diagnosis').textContent = patient.diagnosis;
                
                // Update data cards
                document.getElementById('glucose-value').textContent = patient.avgGlucose;
                document.getElementById('time-in-range').textContent = patient.timeInRange;
                document.getElementById('a1c-value').textContent = patient.a1c;
                
                // Update trends
                const glucoseTrendElement = document.getElementById('glucose-trend');
                glucoseTrendElement.textContent = Math.abs(patient.glucoseTrend) + '%';
                glucoseTrendElement.parentElement.className = patient.glucoseTrend >= 0 ? 'data-trend up-trend' : 'data-trend down-trend';
                glucoseTrendElement.previousElementSibling.innerHTML = patient.glucoseTrend >= 0 ? '<i class="fas fa-arrow-up"></i>' : '<i class="fas fa-arrow-down"></i>';
                
                const rangeTrendElement = document.getElementById('range-trend');
                rangeTrendElement.textContent = Math.abs(patient.rangeTrend) + '%';
                rangeTrendElement.parentElement.className = patient.rangeTrend >= 0 ? 'data-trend up-trend' : 'data-trend down-trend';
                rangeTrendElement.previousElementSibling.innerHTML = patient.rangeTrend >= 0 ? '<i class="fas fa-arrow-up"></i>' : '<i class="fas fa-arrow-down"></i>';
                
                const a1cTrendElement = document.getElementById('a1c-trend');
                a1cTrendElement.textContent = Math.abs(patient.a1cTrend);
                a1cTrendElement.parentElement.className = patient.a1cTrend >= 0 ? 'data-trend up-trend' : 'data-trend down-trend';
                a1cTrendElement.previousElementSibling.innerHTML = patient.a1cTrend >= 0 ? '<i class="fas fa-arrow-up"></i>' : '<i class="fas fa-arrow-down"></i>';
                
                // Update glucose chart
                updateGlucoseChart(patient);
                
                // Update message list
                updateMessageList(patient);
            }
            
            // Update glucose chart
            function updateGlucoseChart(patient) {
                const timeframe = document.getElementById('glucose-timeframe').value;
                let data;
                
                // Sort data by date
                patient.glucoseData.sort((a, b) => a.date - b.date);
                
                // Filter data based on timeframe
                const now = new Date();
                if (timeframe === 'day') {
                    data = patient.glucoseData.filter(reading => {
                        const readingDate = new Date(reading.date);
                        return (now - readingDate) < 24 * 60 * 60 * 1000;
                    });
                } else if (timeframe === 'week') {
                    data = patient.glucoseData.filter(reading => {
                        const readingDate = new Date(reading.date);
                        return (now - readingDate) < 7 * 24 * 60 * 60 * 1000;
                    });
                } else { // month
                    data = patient.glucoseData.filter(reading => {
                        const readingDate = new Date(reading.date);
                        return (now - readingDate) < 30 * 24 * 60 * 60 * 1000;
                    });
                }
                
                // Prepare data for Chart.js
                const labels = data.map(reading => {
                    const date = new Date(reading.date);
                    return date.toLocaleString('en-US', { 
                        month: 'short', 
                        day: 'numeric', 
                        hour: 'numeric', 
                        minute: '2-digit',
                        hour12: true
                    });
                });
                
                const values = data.map(reading => reading.value);
                
                // Get the canvas and destroy any existing chart
                const ctx = document.getElementById('glucose-chart').getContext('2d');
                if (window.glucoseChart) {
                    window.glucoseChart.destroy();
                }
                
                // Create new chart
                window.glucoseChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Glucose (mg/dL)',
                            data: values,
                            backgroundColor: 'rgba(52, 152, 219, 0.2)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(52, 152, 219, 1)',
                            pointBorderColor: '#fff',
                            pointRadius: 4,
                            tension: 0.2
                        }]
                    },
                    options: {
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 40,
                                max: 300,
                                grid: {
                                    color: 'rgba(0, 0, 0, 0.05)'
                                },
                                ticks: {
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    maxRotation: 45,
                                    minRotation: 45,
                                    font: {
                                        size: 10
                                    }
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            annotation: {
                                annotations: {
                                    highLine: {
                                        type: 'line',
                                        yMin: 180,
                                        yMax: 180,
                                        borderColor: 'rgba(231, 76, 60, 0.5)',
                                        borderWidth: 2,
                                        borderDash: [5, 5]
                                    },
                                    lowLine: {
                                        type: 'line',
                                        yMin: 70,
                                        yMax: 70,
                                        borderColor: 'rgba(231, 76, 60, 0.5)',
                                        borderWidth: 2,
                                        borderDash: [5, 5]
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Handle timeframe change
            document.getElementById('glucose-timeframe').addEventListener('change', function() {
                const activePatientId = document.querySelector('.patient-list li.active')?.dataset.patientId;
                if (activePatientId) {
                    const patient = patients.find(p => p.id == activePatientId);
                    updateGlucoseChart(patient);
                }
            });
            
            // Update message list
            function updateMessageList(patient) {
                const messageList = document.getElementById('message-list');
                messageList.innerHTML = '';
                
                // Check if patient has messages
                if (patient.messages.length === 0) {
                    messageList.innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">No messages found for this patient.</div>';
                    return;
                }
                
                // Sort messages by date (newest first)
                patient.messages.sort((a, b) => b.date - a.date);
                
                // Add messages to the list
                patient.messages.forEach(message => {
                    const messageItem = document.createElement('div');
                    messageItem.className = message.unread ? 'message-item unread' : 'message-item';
                    
                    messageItem.innerHTML = `
                        <div class="message-sender">
                            ${message.from === 'doctor' ? '<i class="fas fa-user-md"></i>' : '<i class="fas fa-user"></i>'}
                        </div>
                        <div class="message-content">
                            <div class="message-subject">${message.subject}</div>
                            <div class="message-preview">${message.preview}</div>
                        </div>
                        <div class="message-meta">
                            <div class="message-date">${formatDate(message.date)}</div>
                            ${message.unread ? '<div class="message-badge">New</div>' : ''}
                        </div>
                    `;
                    
                    messageList.appendChild(messageItem);
                });
            }
            
            // Helper function to format dates
            function formatDate(date) {
                const now = new Date();
                const messageDate = new Date(date);
                
                // If today, show time
                if (messageDate.toDateString() === now.toDateString()) {
                    return messageDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
                }
                
                // If this year, show month and day
                if (messageDate.getFullYear() === now.getFullYear()) {
                    return messageDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                }
                
                // Otherwise show full date
                return messageDate.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
            }
            
            // Compose message modal
            const composeModal = document.getElementById('compose-modal');
            const composeBtn = document.getElementById('compose-btn');
            const closeBtn = document.getElementById('modal-close');
            const cancelBtn = document.getElementById('cancel-btn');
            const sendBtn = document.getElementById('send-btn');
            const recipientSelect = document.getElementById('message-recipient');
            const messageForm = document.getElementById('message-form');
            
            // Open compose modal
            composeBtn.addEventListener('click', function() {
                // Populate recipient dropdown
                recipientSelect.innerHTML = '';
                
                // Add currently selected patient first
                const activePatientId = document.querySelector('.patient-list li.active')?.dataset.patientId;
                if (activePatientId) {
                    const activePatient = patients.find(p => p.id == activePatientId);
                    const option = document.createElement('option');
                    option.value = activePatient.id;
                    option.textContent = activePatient.fullName;
                    option.selected = true;
                    recipientSelect.appendChild(option);
                }
                
                // Add other patients
                patients.forEach(patient => {
                    if (activePatientId && patient.id == activePatientId) {
                        return; // Skip active patient as it's already added
                    }
                    
                    const option = document.createElement('option');
                    option.value = patient.id;
                    option.textContent = patient.fullName;
                    recipientSelect.appendChild(option);
                });
                
                composeModal.style.display = 'flex';
            });
            
            // Close modal functions
            function closeModal() {
                composeModal.style.display = 'none';
                messageForm.reset();
            }
            
            closeBtn.addEventListener('click', closeModal);
            cancelBtn.addEventListener('click', closeModal);
            
            // Click outside to close
            composeModal.addEventListener('click', function(e) {
                if (e.target === composeModal) {
                    closeModal();
                }
            });
            
            // Send message
            sendBtn.addEventListener('click', function() {
                const recipient = recipientSelect.value;
                const subject = document.getElementById('message-subject').value;
                const body = document.getElementById('message-body').value;
                
                if (!recipient || !subject || !body) {
                    alert('Please fill in all fields');
                    return;
                }
                
                // Create new message
                const message = {
                    id: Date.now(),
                    from: 'doctor',
                    fromName: 'Dr. Johnson',
                    subject: subject,
                    preview: body.substring(0, 60) + (body.length > 60 ? '...' : ''),
                    date: new Date(),
                    unread: false
                };
                
                // Add message to patient's messages
                const patient = patients.find(p => p.id == recipient);
                patient.messages.push(message);
                
                // If this patient is currently selected, update the message list
                const activePatientId = document.querySelector('.patient-list li.active')?.dataset.patientId;
                if (activePatientId == recipient) {
                    updateMessageList(patient);
                }
                
                // Show confirmation and close modal
                alert('Message sent successfully');
                closeModal();
            });
            
            // Alert Management System
            function initializeAlertSystem() {
                // Alert modal elements
                const alertModal = document.getElementById('alert-modal');
                const addAlertBtn = document.getElementById('add-alert-btn');
                const alertModalClose = document.getElementById('alert-modal-close');
                const alertCancelBtn = document.getElementById('alert-cancel-btn');
                const alertSaveBtn = document.getElementById('alert-save-btn');
                const alertForm = document.getElementById('alert-form');
                const alertType = document.getElementById('alert-type');
                const thresholdContainer = document.getElementById('threshold-container');
                const thresholdInput = document.getElementById('alert-threshold');
                const thresholdUnit = document.getElementById('threshold-unit');
                const thresholdHelp = document.getElementById('threshold-help');
                
                // Add sample alerts to patients
                patients.forEach(patient => {
                    // Initialize alerts array if it doesn't exist
                    if (!patient.alerts) {
                        patient.alerts = [];
                        
                        // Add default alerts based on diabetes type
                        if (patient.diagnosis === 'Type 1 Diabetes') {
                            patient.alerts.push({
                                id: 1,
                                type: 'high',
                                threshold: 250,
                                unit: 'mg/dL',
                                severity: 'warning',
                                notifications: ['ehr', 'patient'],
                                status: 'active',
                                notes: 'Default high glucose alert for T1D'
                            });
                            
                            patient.alerts.push({
                                id: 2,
                                type: 'low',
                                threshold: 70,
                                unit: 'mg/dL',
                                severity: 'critical',
                                notifications: ['ehr', 'patient', 'sms'],
                                status: 'active',
                                notes: 'Default low glucose alert for T1D'
                            });
                        } else {
                            // Type 2 Diabetes
                            patient.alerts.push({
                                id: 1,
                                type: 'high',
                                threshold: 200,
                                unit: 'mg/dL',
                                severity: 'warning',
                                notifications: ['ehr', 'patient'],
                                status: 'active',
                                notes: 'Default high glucose alert for T2D'
                            });
                            
                            patient.alerts.push({
                                id: 2,
                                type: 'low',
                                threshold: 80,
                                unit: 'mg/dL',
                                severity: 'warning',
                                notifications: ['ehr', 'patient'],
                                status: 'active',
                                notes: 'Default low glucose alert for T2D'
                            });
                        }
                    }
                });
                
                // Update alert type UI based on selection
                alertType.addEventListener('change', function() {
                    updateAlertTypeUI(this.value);
                });
                
                function updateAlertTypeUI(type) {
                    switch(type) {
                        case 'high':
                            thresholdContainer.style.display = 'block';
                            thresholdInput.setAttribute('min', '140');
                            thresholdInput.setAttribute('max', '400');
                            thresholdInput.value = '200';
                            thresholdUnit.textContent = 'mg/dL';
                            thresholdHelp.textContent = 'Trigger alert when glucose exceeds this value';
                            break;
                        case 'low':
                            thresholdContainer.style.display = 'block';
                            thresholdInput.setAttribute('min', '40');
                            thresholdInput.setAttribute('max', '100');
                            thresholdInput.value = '70';
                            thresholdUnit.textContent = 'mg/dL';
                            thresholdHelp.textContent = 'Trigger alert when glucose falls below this value';
                            break;
                        case 'rate':
                            thresholdContainer.style.display = 'block';
                            thresholdInput.setAttribute('min', '2');
                            thresholdInput.setAttribute('max', '15');
                            thresholdInput.value = '5';
                            thresholdUnit.textContent = 'mg/dL/min';
                            thresholdHelp.textContent = 'Trigger alert when glucose changes faster than this rate';
                            break;
                        case 'missed':
                            thresholdContainer.style.display = 'block';
                            thresholdInput.setAttribute('min', '1');
                            thresholdInput.setAttribute('max', '24');
                            thresholdInput.value = '4';
                            thresholdUnit.textContent = 'hours';
                            thresholdHelp.textContent = 'Trigger alert when no readings for this duration';
                            break;
                    }
                }
                
                // Initialize with high glucose alert type
                updateAlertTypeUI('high');
                
                // Display patient alerts
                function displayPatientAlerts(patient) {
                    const alertsList = document.getElementById('alerts-list');
                    const noAlertsMessage = document.getElementById('no-alerts-message');
                    
                    // Clear current alerts
                    alertsList.innerHTML = '';
                    
                    // Check if patient has alerts
                    if (!patient.alerts || patient.alerts.length === 0) {
                        noAlertsMessage.style.display = 'block';
                        return;
                    }
                    
                    // Hide no alerts message
                    noAlertsMessage.style.display = 'none';
                    
                    // Display each alert
                    patient.alerts.forEach(alert => {
                        const row = document.createElement('tr');
                        row.style.borderBottom = '1px solid #eee';
                        
                        // Format alert type
                        let alertTypeText = '';
                        let alertTypeIcon = '';
                        switch(alert.type) {
                            case 'high':
                                alertTypeText = 'High Glucose';
                                alertTypeIcon = '<i class="fas fa-arrow-up" style="color: #e74c3c;"></i>';
                                break;
                            case 'low':
                                alertTypeText = 'Low Glucose';
                                alertTypeIcon = '<i class="fas fa-arrow-down" style="color: #3498db;"></i>';
                                break;
                            case 'rate':
                                alertTypeText = 'Rapid Change';
                                alertTypeIcon = '<i class="fas fa-bolt" style="color: #f39c12;"></i>';
                                break;
                            case 'missed':
                                alertTypeText = 'Missed Readings';
                                alertTypeIcon = '<i class="fas fa-clock" style="color: #95a5a6;"></i>';
                                break;
                        }
                        
                        // Format severity
                        let severityClass = '';
                        switch(alert.severity) {
                            case 'info':
                                severityClass = 'background-color: #d6eaf8; color: #2980b9;';
                                break;
                            case 'warning':
                                severityClass = 'background-color: #fef9e7; color: #f39c12;';
                                break;
                            case 'critical':
                                severityClass = 'background-color: #fadbd8; color: #e74c3c;';
                                break;
                        }
                        
                        // Format notifications
                        let notificationsText = alert.notifications.map(n => {
                            switch(n) {
                                case 'ehr': return 'EHR';
                                case 'patient': return 'App';
                                case 'sms': return 'SMS';
                                default: return n;
                            }
                        }).join(', ');
                        
                        row.innerHTML = `
                            <td style="padding: 10px;">
                                <div style="display: flex; align-items: center;">
                                    ${alertTypeIcon} <span style="margin-left: 8px;">${alertTypeText}</span>
                                </div>
                            </td>
                            <td style="padding: 10px;">${alert.threshold} ${alert.unit}</td>
                            <td style="padding: 10px;">
                                <span style="padding: 4px 8px; border-radius: 3px; font-size: 12px; ${severityClass}">
                                    ${alert.status === 'active' ? 'Active' : 'Inactive'}
                                </span>
                            </td>
                            <td style="padding: 10px;">${notificationsText}</td>
                            <td style="padding: 10px;">
                                <button class="edit-alert-btn" data-alert-id="${alert.id}" style="background: none; border: none; color: #3498db; cursor: pointer; margin-right: 10px;">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="toggle-alert-btn" data-alert-id="${alert.id}" style="background: none; border: none; color: #95a5a6; cursor: pointer; margin-right: 10px;">
                                    <i class="fas fa-${alert.status === 'active' ? 'pause' : 'play'}"></i>
                                </button>
                                <button class="delete-alert-btn" data-alert-id="${alert.id}" style="background: none; border: none; color: #e74c3c; cursor: pointer;">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        
                        alertsList.appendChild(row);
                    });
                    
                    // Add event listeners for alert actions
                    document.querySelectorAll('.edit-alert-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const alertId = this.dataset.alertId;
                            const alert = patient.alerts.find(a => a.id == alertId);
                            openEditAlertModal(alert, patient);
                        });
                    });
                    
                    document.querySelectorAll('.toggle-alert-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const alertId = this.dataset.alertId;
                            const alert = patient.alerts.find(a => a.id == alertId);
                            alert.status = alert.status === 'active' ? 'inactive' : 'active';
                            displayPatientAlerts(patient);
                        });
                    });
                    
                    document.querySelectorAll('.delete-alert-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const alertId = this.dataset.alertId;
                            if (confirm('Are you sure you want to delete this alert?')) {
                                patient.alerts = patient.alerts.filter(a => a.id != alertId);
                                displayPatientAlerts(patient);
                            }
                        });
                    });
                }
                
                // Open alert modal with prefilled data for editing
                function openEditAlertModal(alert, patient) {
                    // Set form values
                    document.getElementById('alert-type').value = alert.type;
                    updateAlertTypeUI(alert.type);
                    document.getElementById('alert-threshold').value = alert.threshold;
                    document.getElementById('alert-severity').value = alert.severity;
                    document.getElementById('notify-ehr').checked = alert.notifications.includes('ehr');
                    document.getElementById('notify-patient').checked = alert.notifications.includes('patient');
                    document.getElementById('notify-sms').checked = alert.notifications.includes('sms');
                    document.getElementById('alert-notes').value = alert.notes || '';
                    
                    // Store the alert ID for updating later
                    alertForm.dataset.alertId = alert.id;
                    alertForm.dataset.patientId = patient.id;
                    
                    // Show modal
                    alertModal.style.display = 'flex';
                }
                
                // Add new alert button
                addAlertBtn.addEventListener('click', function() {
                    // Get current patient
                    const activePatientId = document.querySelector('.patient-list li.active')?.dataset.patientId;
                    if (!activePatientId) {
                        alert('Please select a patient first');
                        return;
                    }
                    
                    // Reset form
                    alertForm.reset();
                    delete alertForm.dataset.alertId; // New alert
                    alertForm.dataset.patientId = activePatientId;
                    updateAlertTypeUI('high'); // Default to high glucose alert
                    
                    // Show modal
                    alertModal.style.display = 'flex';
                });
                
                // Close alert modal
                function closeAlertModal() {
                    alertModal.style.display = 'none';
                }
                
                alertModalClose.addEventListener('click', closeAlertModal);
                alertCancelBtn.addEventListener('click', closeAlertModal);
                
                // Click outside to close
                alertModal.addEventListener('click', function(e) {
                    if (e.target === alertModal) {
                        closeAlertModal();
                    }
                });
                
                // Save alert
                alertSaveBtn.addEventListener('click', function() {
                    // Get form values
                    const type = document.getElementById('alert-type').value;
                    const threshold = parseInt(document.getElementById('alert-threshold').value);
                    const severity = document.getElementById('alert-severity').value;
                    const notifyEhr = document.getElementById('notify-ehr').checked;
                    const notifyPatient = document.getElementById('notify-patient').checked;
                    const notifySms = document.getElementById('notify-sms').checked;
                    const notes = document.getElementById('alert-notes').value;
                    
                    // Validate input
                    if (!type || isNaN(threshold)) {
                        alert('Please fill in all required fields');
                        return;
                    }
                    
                    // Get unit based on type
                    let unit;
                    switch(type) {
                        case 'high':
                        case 'low':
                            unit = 'mg/dL';
                            break;
                        case 'rate':
                            unit = 'mg/dL/min';
                            break;
                        case 'missed':
                            unit = 'hours';
                            break;
                    }
                    
                    // Build notifications array
                    const notifications = [];
                    if (notifyEhr) notifications.push('ehr');
                    if (notifyPatient) notifications.push('patient');
                    if (notifySms) notifications.push('sms');
                    
                    // Get patient
                    const patientId = alertForm.dataset.patientId;
                    const patient = patients.find(p => p.id == patientId);
                    
                    // Create or update alert
                    const alertId = alertForm.dataset.alertId;
                    if (alertId) {
                        // Update existing alert
                        const alert = patient.alerts.find(a => a.id == alertId);
                        alert.type = type;
                        alert.threshold = threshold;
                        alert.unit = unit;
                        alert.severity = severity;
                        alert.notifications = notifications;
                        alert.notes = notes;
                    } else {
                        // Create new alert
                        const newAlert = {
                            id: Date.now(),
                            type: type,
                            threshold: threshold,
                            unit: unit,
                            severity: severity,
                            notifications: notifications,
                            status: 'active',
                            notes: notes
                        };
                        
                        patient.alerts.push(newAlert);
                    }
                    
                    // Update display
                    displayPatientAlerts(patient);
                    
                    // Close modal
                    closeAlertModal();
                });
                
                // Hook into displayPatientData function
                const originalDisplayPatientData = displayPatientData;
                displayPatientData = function(patient) {
                    originalDisplayPatientData(patient);
                    displayPatientAlerts(patient);
                };
            }
            
            // Initialize alert system
            initializeAlertSystem();
        });
    </script>
</body>
</html>